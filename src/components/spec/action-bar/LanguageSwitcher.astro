---
import { getRelativeLocaleUrlList, getRelativeLocaleUrl } from "astro:i18n";
import * as Switcher from "./switcher";

const LOCALE_NAMES: Record<string, string> = {
    en: "English",
};

const currentLocale = String(Astro.currentLocale);

const locales = getRelativeLocaleUrlList().map((l) => {
    const locale = l.split("/")[1];
    return {
        text: LOCALE_NAMES[locale] ?? locale,
        active: locale === currentLocale,
        href: getRelativeLocaleUrl(locale ?? currentLocale),
    };
});
---

<Switcher.Root>
    <Switcher.Trigger>{LOCALE_NAMES[currentLocale] ?? currentLocale}</Switcher.Trigger>
    <Switcher.ItemsRoot>
        {
            locales.map((locale) => (
                <Switcher.Item as="a" active={locale.active} href={locale.href}>
                    {locale.text}
                </Switcher.Item>
            ))
        }
    </Switcher.ItemsRoot>
</Switcher.Root>
